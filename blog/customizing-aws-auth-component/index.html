<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.79f019bbb7ca1c7ab3d4.css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}strong{font-weight:bolder}img{border-style:none}button,input{font-family:inherit;font-size:100%;line-height:1.15;margin:0;overflow:visible}button{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}legend{color:inherit;display:table;max-width:100%;white-space:normal}[type=checkbox],[type=radio],legend{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}[hidden]{display:none}h1,h2,p{margin:0}button{background-color:transparent;background-image:none;padding:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}html{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}img{border-style:solid}input::-webkit-input-placeholder{color:#a0aec0}input::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder{color:#a0aec0}input::-ms-input-placeholder{color:#a0aec0}input::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}h1,h2{font-size:inherit;font-weight:inherit}button,input{padding:0;line-height:inherit;color:inherit}canvas,img,svg{display:block;vertical-align:middle}img{max-width:100%;height:auto}h1{font-size:1.5rem}h1,h2{margin-top:.5rem;margin-bottom:.5rem}h2{font-size:1.25rem}p{margin-top:.25rem}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.bg-gray-200{background-color:#edf2f7}.bg-green-200{background-color:#c6f6d5}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.flex{display:-webkit-box;display:flex}.flex-col{-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.flex-wrap{flex-wrap:wrap}.justify-center{-webkit-box-pack:center;justify-content:center}.justify-around{justify-content:space-around}.font-mono{font-family:Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-semibold{font-weight:600}.font-bold{font-weight:700}.h-screen{height:100vh}.mx-auto{margin-left:auto;margin-right:auto}.mt-0{margin-top:0}.mr-2{margin-right:.5rem}.mb-2{margin-bottom:.5rem}.mt-4{margin-top:1rem}.mr-4{margin-right:1rem}.mt-8{margin-top:2rem}.mt-10{margin-top:2.5rem}.mt-16{margin-top:4rem}.mb-16{margin-bottom:4rem}.mb-20{margin-bottom:5rem}.mt-24{margin-top:6rem}.mt-40{margin-top:10rem}.max-w-md{max-width:28rem}.overflow-hidden{overflow:hidden}.p-6{padding:1.5rem}.p-8{padding:2rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.px-3{padding-left:.75rem;padding-right:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.pt-5{padding-top:1.25rem}.shadow-lg{box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -2px rgba(0,0,0,.05)}.text-center{text-align:center}.text-black{color:#000}.text-gray-700{color:#4a5568}.text-green-300{color:#9ae6b4}.hover\:text-black:hover{color:#000}.text-sm{font-size:.875rem}.text-base{font-size:1rem}.text-lg{font-size:1.125rem}.text-xl{font-size:1.25rem}.text-3xl{font-size:1.875rem}.text-4xl{font-size:2.25rem}.no-underline{text-decoration:none}.w-1\/3{width:33.333333%}.w-full{width:100%}.transform{--transform-translate-x:0;--transform-translate-y:0;--transform-rotate:0;--transform-skew-x:0;--transform-skew-y:0;--transform-scale-x:1;--transform-scale-y:1;-webkit-transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y));transform:translateX(var(--transform-translate-x)) translateY(var(--transform-translate-y)) rotate(var(--transform-rotate)) skewX(var(--transform-skew-x)) skewY(var(--transform-skew-y)) scaleX(var(--transform-scale-x)) scaleY(var(--transform-scale-y))}.blog-post-content h2{font-size:1.5rem;margin-top:4rem;margin-bottom:.5rem;font-weight:700}.blog-post-content p{font-size:1.25rem}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.19.19"/><title data-react-helmet="true"></title><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png"/><link as="script" rel="preload" href="/styles-8ee091a996aaa0917eb3.js"/><link as="script" rel="preload" href="/component---src-components-post-content-tsx-3e07b1a67d6ce518dbf6.js"/><link as="script" rel="preload" href="/commons-58cf04ccf34f7124f06f.js"/><link as="script" rel="preload" href="/app-57c7107eedc226c06eb6.js"/><link as="script" rel="preload" href="/webpack-runtime-499901491cc60e9d8b53.js"/><link as="fetch" rel="preload" href="/page-data/blog/customizing-aws-auth-component/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="blog-post"><nav class="flex justify-center p-6 text-lg"><a class="block mt-4 inline-block mt-0 text-green-300 hover:text-black font-mono mr-4 no-underline text-black" href="/">About</a><a class="block mt-4 inline-block mt-0 text-green-300 hover:text-black font-mono mr-4 no-underline" href="/projects/">Projects</a><a class="block mt-4 inline-block mt-0 text-green-300 hover:text-black font-mono mr-4 no-underline text-black" href="/blog/">Blog</a></nav><div class="container mx-auto"><div class="mb-16"><h1 class="text-3xl font-bold">Customizing Amplify&#x27;s Auth Component</h1><h2>2020-02-25</h2></div><div class="blog-post-content"><p>Amplify gives us everything we need out the of the box for authentication through AWS Cognito. The <code class="language-text">aws-amplify-react</code> package even includes a component built for us to handle</p>
<ul>
<li>Sign In</li>
<li>Sign Up</li>
<li>Creating an Account</li>
</ul>
<p>This is nice and all, however then you are at the mercy of using the default look of Amplify UI.</p>
<p>It would be nice if we could just override the rendering function but keep the component logic.</p>
<p>Well we can.</p>
<p>Luckily the components from <code class="language-text">aws-amplify-react</code> are class components. We can extend these classes to override the render method while calling thier parent's class functions to manage the state and functionality.
This keeps us in charge of the UI while AWS can handle the logic.</p>
<p>Take a look at the <code class="language-text">CustomSignIn</code> component below.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="language-tsx"><code class="language-tsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> TextField <span class="token keyword">from</span> <span class="token string">"@material-ui/core/TextField"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@material-ui/core"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SignIn<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"aws-amplify-react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ISignInProps <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"aws-amplify-react/lib-esm/Auth/SignIn"</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CustomSignIn</span> <span class="token keyword">extends</span> <span class="token class-name">SignIn</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> ISignInProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_validAuthStates <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"signIn"</span><span class="token punctuation">,</span> <span class="token string">"signedOut"</span><span class="token punctuation">,</span> <span class="token string">"signedUp"</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>

  <span class="token function">showComponent</span><span class="token punctuation">(</span><span class="token parameter">theme<span class="token operator">:</span> <span class="token builtin">any</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
        <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
          display<span class="token operator">:</span> <span class="token string">"flex"</span><span class="token punctuation">,</span>
          flexDirection<span class="token operator">:</span> <span class="token string">"column"</span><span class="token punctuation">,</span>
          maxWidth<span class="token operator">:</span> <span class="token string">"75%"</span><span class="token punctuation">,</span>
          justifyContent<span class="token operator">:</span> <span class="token string">"center"</span><span class="token punctuation">,</span>
          paddingLeft<span class="token operator">:</span> <span class="token string">"25%"</span><span class="token punctuation">,</span>
          paddingRight<span class="token operator">:</span> <span class="token string">"25%"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text"> Welcome to the rest of your life</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span><span class="token plain-text"> Financial life that is</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span><span class="token plain-text">
          &lt;TextField
            defaultValue="Email"
            inputProps=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token string">"aria-label"</span><span class="token operator">:</span> <span class="token string">"Email"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
            style=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginBottom<span class="token operator">:</span> <span class="token string">"1rem"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
            fullWidth
            /**
             * I believe the id and key has to match something amplify recognizes
             */
            id="email"
            key="email"
            name="email"
            label="email"
            /**
             * Uses the parents components onChange handler
             */
            onChange=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span><span class="token plain-text">
            variant="outlined"
          />
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
          &lt;TextField
            defaultValue="Password"
            inputProps=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token string">"aria-label"</span><span class="token operator">:</span> <span class="token string">"password"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
            style=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginBottom<span class="token operator">:</span> <span class="token string">"1rem"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token plain-text">
            fullWidth
            /**
             * I believe the id and key has to match something amplify recognizes
             */
            id="password"
            key="password"
            name="password"
            type="password"
            label="password"
            /**
             * Uses the parents components onChange handler
             */
            onChange=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span><span class="token plain-text">
            variant="outlined"
          />
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">changeState</span><span class="token punctuation">(</span><span class="token string">"signUp"</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
            Sign Up
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span>
            <span class="token attr-name">variant</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>contained<span class="token punctuation">"</span></span>
            <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span>
            <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">signIn</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
            <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> marginLeft<span class="token operator">:</span> <span class="token string">"15%"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
          <span class="token punctuation">></span></span><span class="token plain-text">
            Sign In
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>As you can see, this overrides the <code class="language-text">SignIn</code> component from the <code class="language-text">aws-amplify-react</code> package.</p>
<p>Fist take a look at the constructor.</p>
<div class="gatsby-highlight" data-language="typescript"><pre class="language-typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CustomSignIn</span> <span class="token keyword">extends</span> <span class="token class-name">SignIn</span> <span class="token punctuation">{</span>
  <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token operator">:</span> ISignInProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_validAuthStates <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"signIn"</span><span class="token punctuation">,</span> <span class="token string">"signedOut"</span><span class="token punctuation">,</span> <span class="token string">"signedUp"</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Notice <code class="language-text">this._validAuthStates</code>, Amplify uses <code class="language-text">authState</code> to track the current auth status of a user.
With <code class="language-text">this._validAuthStates</code> we can determine which state is valid for this particular component.
Amplify then uses this to only render the component when in these states.</p>
<p>Things that still need to be written about</p>
<ol>
<li>If you do not require a username, how you map the email field to username.</li>
<li>How to display error messages. (Wrong username/password)</li>
</ol>
<p><a href="https://blog.kylegalbraith.com/2018/11/29/how-to-easily-customize-the-aws-amplify-authentication-ui/">https://blog.kylegalbraith.com/2018/11/29/how-to-easily-customize-the-aws-amplify-authentication-ui/</a></p></div></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/customizing-aws-auth-component";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-57c7107eedc226c06eb6.js"],"component---src-components-post-content-tsx":["/component---src-components-post-content-tsx-3e07b1a67d6ce518dbf6.js"],"component---src-pages-blog-tsx":["/component---src-pages-blog-tsx-cbac74ae9aa476c7d53b.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-423eb00bfd5963da0944.js"],"component---src-pages-projects-tsx":["/component---src-pages-projects-tsx-423d93bd22e80c2433e9.js"]};/*]]>*/</script><script src="/webpack-runtime-499901491cc60e9d8b53.js" async=""></script><script src="/app-57c7107eedc226c06eb6.js" async=""></script><script src="/commons-58cf04ccf34f7124f06f.js" async=""></script><script src="/component---src-components-post-content-tsx-3e07b1a67d6ce518dbf6.js" async=""></script><script src="/styles-8ee091a996aaa0917eb3.js" async=""></script></body></html>