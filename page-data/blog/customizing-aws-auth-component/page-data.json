{"componentChunkName":"component---src-components-post-content-tsx","path":"/blog/customizing-aws-auth-component","result":{"data":{"markdownRemark":{"html":"<p>Amplify gives us everything we need out the of the box for authentication through AWS Cognito. The <code class=\"language-text\">aws-amplify-react</code> package even includes a component built for us to handle</p>\n<ul>\n<li>Sign In</li>\n<li>Sign Up</li>\n<li>Creating an Account</li>\n</ul>\n<p>This is nice and all, however then you are at the mercy of using the default look of Amplify UI.</p>\n<p>It would be nice if we could just override the rendering function but keep the component logic.</p>\n<p>Well we can.</p>\n<p>Luckily the components from <code class=\"language-text\">aws-amplify-react</code> are class components. We can extend these classes to override the render method while calling thier parent's class functions to manage the state and functionality.\nThis keeps us in charge of the UI while AWS can handle the logic.</p>\n<p>Take a look at the <code class=\"language-text\">CustomSignIn</code> component below.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> TextField <span class=\"token keyword\">from</span> <span class=\"token string\">\"@material-ui/core/TextField\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Button <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@material-ui/core\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> SignIn<span class=\"token punctuation\">,</span> Link <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"aws-amplify-react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ISignInProps <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"aws-amplify-react/lib-esm/Auth/SignIn\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomSignIn</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">SignIn</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token operator\">:</span> ISignInProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_validAuthStates <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"signIn\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"signedOut\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"signedUp\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">showComponent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">theme<span class=\"token operator\">:</span> <span class=\"token builtin\">any</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n        <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n          display<span class=\"token operator\">:</span> <span class=\"token string\">\"flex\"</span><span class=\"token punctuation\">,</span>\n          flexDirection<span class=\"token operator\">:</span> <span class=\"token string\">\"column\"</span><span class=\"token punctuation\">,</span>\n          maxWidth<span class=\"token operator\">:</span> <span class=\"token string\">\"75%\"</span><span class=\"token punctuation\">,</span>\n          justifyContent<span class=\"token operator\">:</span> <span class=\"token string\">\"center\"</span><span class=\"token punctuation\">,</span>\n          paddingLeft<span class=\"token operator\">:</span> <span class=\"token string\">\"25%\"</span><span class=\"token punctuation\">,</span>\n          paddingRight<span class=\"token operator\">:</span> <span class=\"token string\">\"25%\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n      <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> Welcome to the rest of your life</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"> Financial life that is</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h3</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          &lt;TextField\n            defaultValue=\"Email\"\n            inputProps=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"aria-label\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Email\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            style=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> marginBottom<span class=\"token operator\">:</span> <span class=\"token string\">\"1rem\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            fullWidth\n            /**\n             * I believe the id and key has to match something amplify recognizes\n             */\n            id=\"email\"\n            key=\"email\"\n            name=\"email\"\n            label=\"email\"\n            /**\n             * Uses the parents components onChange handler\n             */\n            onChange=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleInputChange<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            variant=\"outlined\"\n          />\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          &lt;TextField\n            defaultValue=\"Password\"\n            inputProps=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token string\">\"aria-label\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"password\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            style=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> marginBottom<span class=\"token operator\">:</span> <span class=\"token string\">\"1rem\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            fullWidth\n            /**\n             * I believe the id and key has to match something amplify recognizes\n             */\n            id=\"password\"\n            key=\"password\"\n            name=\"password\"\n            type=\"password\"\n            label=\"password\"\n            /**\n             * Uses the parents components onChange handler\n             */\n            onChange=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleInputChange<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            variant=\"outlined\"\n          />\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Link</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">changeState</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"signUp\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            Sign Up\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Link</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Button</span></span>\n            <span class=\"token attr-name\">variant</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>contained<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">color</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>primary<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">signIn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> marginLeft<span class=\"token operator\">:</span> <span class=\"token string\">\"15%\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n          <span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            Sign In\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Button</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>As you can see, this overrides the <code class=\"language-text\">SignIn</code> component from the <code class=\"language-text\">aws-amplify-react</code> package.</p>\n<p>Fist take a look at the constructor.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomSignIn</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">SignIn</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token operator\">:</span> ISignInProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_validAuthStates <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"signIn\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"signedOut\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"signedUp\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Notice <code class=\"language-text\">this._validAuthStates</code>, Amplify uses <code class=\"language-text\">authState</code> to track the current auth status of a user.\nWith <code class=\"language-text\">this._validAuthStates</code> we can determine which state is valid for this particular component.\nAmplify then uses this to only render the component when in these states.</p>\n<p>Things that still need to be written about</p>\n<ol>\n<li>If you do not require a username, how you map the email field to username.</li>\n<li>How to display error messages. (Wrong username/password)</li>\n</ol>\n<p><a href=\"https://blog.kylegalbraith.com/2018/11/29/how-to-easily-customize-the-aws-amplify-authentication-ui/\">https://blog.kylegalbraith.com/2018/11/29/how-to-easily-customize-the-aws-amplify-authentication-ui/</a></p>","frontmatter":{"createdDate":"2020-02-25","path":"/blog/customizing-aws-auth-component","title":"Customizing Amplify's Auth Component"}}},"pageContext":{}},"staticQueryHashes":[]}